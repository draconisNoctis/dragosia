<form [formGroup]="form">
    <h2 i18n>Melee</h2>
    <div formArrayName="melee" class=wrapper>
        <div class="row" *ngFor="let control of meleeForm.controls; let index = index" [formGroup]="control">
            <label>{{ control.value.name }}</label>
            <mat-form-field floatLabel="never">
                <input matInput formControlName="attribute" i18n-placeholder placeholder="Attribute" />
            </mat-form-field>
            <mat-form-field floatLabel="never">
                <input matInput formControlName="skill" i18n-placeholder placeholder="Skill" />
            </mat-form-field>
            <jui-radio-range deselectable [readonly]="mode === 'button'" [min]="mins.melee[index]" formControlName="value"></jui-radio-range>
            <div *ngIf="mode === 'button'"><button mat-icon-button (click)="add('melee', index)" [disabled]="form.value.melee[index].value >= 5 || pointsAvailable < COSTS[form.value.melee[index].value + 1]"><mat-icon>add</mat-icon></button></div>
        </div>
    </div>

    <h2 i18n>Range</h2>
    <div formArrayName="range" class=wrapper>
        <div class="row" *ngFor="let control of rangeForm.controls; let index = index" [formGroup]="control">
            <label>{{ control.value.name }}</label>
            <mat-form-field floatLabel="never">
                <input matInput formControlName="attribute" i18n-placeholder placeholder="Attribute" />
            </mat-form-field>
            <mat-form-field floatLabel="never">
                <input matInput formControlName="skill" i18n-placeholder placeholder="Skill" />
            </mat-form-field>
            <jui-radio-range deselectable [readonly]="mode === 'button'" [min]="mins.range[index]" formControlName="value"></jui-radio-range>
            <div *ngIf="mode === 'button'"><button mat-icon-button (click)="add('range', index)" [disabled]="form.value.range[index].value >= 5 || pointsAvailable < COSTS[form.value.range[index].value + 1]"><mat-icon>add</mat-icon></button></div>
        </div>
    </div>

    <h2 i18n>Physical</h2>
    <div formArrayName="physical" class=wrapper>
        <div class="row" *ngFor="let control of physicalForm.controls; let index = index" [formGroup]="control">
            <label>{{ control.value.name }}</label>
            <mat-form-field floatLabel="never">
                <input matInput formControlName="attribute" i18n-placeholder placeholder="Attribute" />
            </mat-form-field>
            <mat-form-field floatLabel="never">
                <input matInput formControlName="skill" i18n-placeholder placeholder="Skill" />
            </mat-form-field>
            <jui-radio-range deselectable [readonly]="mode === 'button'" [min]="mins.physical[index]" formControlName="value"></jui-radio-range>
            <div *ngIf="mode === 'button'"><button mat-icon-button (click)="add('physical', index)" [disabled]="form.value.physical[index].value >= 5 || pointsAvailable < COSTS[form.value.physical[index].value + 1]"><mat-icon>add</mat-icon></button></div>
        </div>
    </div>

    <h2 i18n>Mental</h2>
    <div formArrayName="mental" class="wrapper">
        <div class="row" *ngFor="let control of mentalForm.controls; let index = index" [formGroup]="control">
            <label>{{ control.value.name }}</label>
            <mat-form-field floatLabel="never">
                <input matInput formControlName="attribute" i18n-placeholder placeholder="Attribute" />
            </mat-form-field>
            <mat-form-field floatLabel="never">
                <input matInput formControlName="skill" i18n-placeholder placeholder="Skill" />
            </mat-form-field>
            <jui-radio-range deselectable [readonly]="mode === 'button'" [min]="mins.mental[index]" formControlName="value"></jui-radio-range>
            <div *ngIf="mode === 'button'"><button mat-icon-button (click)="add('mental', index)" [disabled]="form.value.mental[index].value >= 5 || pointsAvailable < COSTS[form.value.mental[index].value + 1]"><mat-icon>add</mat-icon></button></div>
        </div>
    </div>

    <h2 i18n>Gifts</h2>
    <div formArrayName="gifts">
        <div *ngFor="let control of giftsForm.controls; let index = index" [formGroup]="control">
            <label>{{ control.value.name }}</label>
            <mat-form-field floatLabel="never">
                <input matInput formControlName="attribute" i18n-placeholder placeholder="Attribute" />
            </mat-form-field>
            <mat-form-field floatLabel="never">
                <input matInput formControlName="skill" i18n-placeholder placeholder="Skill" />
            </mat-form-field>
            <jui-radio-range deselectable [readonly]="mode === 'button'" [min]="mins.gifts[index]" formControlName="value"></jui-radio-range>
            <div *ngIf="mode === 'button'"><button mat-icon-button (click)="add('gifts', index)" [disabled]="form.value.gifts[index].value >= 5 || pointsAvailable < COSTS[form.value.gifts[index].value + 1]"><mat-icon>add</mat-icon></button></div>
        </div>
    </div>
</form>

<button mat-mini-fab (click)="openAddDialog()" [disabled]="pointsAvailable < 1"  matTooltip="Add Talent" i18n-matTooltip><mat-icon>add</mat-icon></button>
